import{S as te,i as se,s as ae,k as y,a as A,l as p,m as v,h as g,c as I,n as l,b as re,J as d,H as z}from"./index.6e373d47.js";import{R as Y,P as ie,g as ne}from"./stores.e8a1fa5a.js";function oe(s){let e,t,a,r,n,i,o,f,w,S,x,P,T,E,O,F,V,k,D;return{c(){e=y("div"),t=y("div"),a=A(),r=y("div"),n=A(),i=y("div"),o=A(),f=y("div"),w=A(),S=y("div"),x=A(),P=y("div"),T=y("div"),E=y("div"),O=A(),F=y("div"),V=A(),k=y("div"),D=y("div"),this.h()},l(q){e=p(q,"DIV",{id:!0,class:!0});var u=v(e);t=p(u,"DIV",{class:!0}),v(t).forEach(g),a=I(u),r=p(u,"DIV",{class:!0}),v(r).forEach(g),n=I(u),i=p(u,"DIV",{class:!0}),v(i).forEach(g),o=I(u),f=p(u,"DIV",{class:!0}),v(f).forEach(g),w=I(u),S=p(u,"DIV",{class:!0}),v(S).forEach(g),x=I(u),P=p(u,"DIV",{id:!0,class:!0});var M=v(P);T=p(M,"DIV",{id:!0,class:!0});var U=v(T);E=p(U,"DIV",{id:!0,class:!0}),v(E).forEach(g),O=I(U),F=p(U,"DIV",{id:!0,class:!0}),v(F).forEach(g),U.forEach(g),V=I(M),k=p(M,"DIV",{id:!0,class:!0});var N=v(k);D=p(N,"DIV",{id:!0,class:!0}),v(D).forEach(g),N.forEach(g),M.forEach(g),u.forEach(g),this.h()},h(){l(t,"class","bubble svelte-1h26evt"),l(r,"class","bubble svelte-1h26evt"),l(i,"class","bubble svelte-1h26evt"),l(f,"class","bubble svelte-1h26evt"),l(S,"class","bubble svelte-1h26evt"),l(E,"id","pan"),l(E,"class","svelte-1h26evt"),l(F,"id","handle"),l(F,"class","svelte-1h26evt"),l(T,"id","sides"),l(T,"class","svelte-1h26evt"),l(D,"id","pastry"),l(D,"class","svelte-1h26evt"),l(k,"id","pancake"),l(k,"class","svelte-1h26evt"),l(P,"id","area"),l(P,"class","svelte-1h26evt"),l(e,"id","cooking"),l(e,"class","svelte-1h26evt")},m(q,u){re(q,e,u),d(e,t),d(e,a),d(e,r),d(e,n),d(e,i),d(e,o),d(e,f),d(e,w),d(e,S),d(e,x),d(e,P),d(P,T),d(T,E),d(T,O),d(T,F),d(P,V),d(P,k),d(k,D)},p:z,i:z,o:z,d(q){q&&g(e)}}}class Ue extends te{constructor(e){super(),se(this,e,null,oe,ae,{})}}const ce=s=>/^[a-zA-Z0-9][-a-zA-Z0-9]{2,}[a-zA-Z0-9]$/.test(s);var le=Object.defineProperty,de=(s,e,t)=>e in s?le(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,H=(s,e,t)=>(de(s,typeof e!="symbol"?e+"":e,t),t);class _ extends Error{constructor(e="An invalid API response was returned",t,a){super(e),H(this,"url"),H(this,"response"),this.url=t,this.response=a}}const he=s=>{if(ce(s))return`https://${s}.cdn.prismic.io/api/v2`;throw new _(`An invalid Prismic repository name was given: ${s}`,void 0,void 0)},ue=s=>{try{return new URL(s),!0}catch{return!1}},L=s=>Array.isArray(s)?s:[s],fe={accessToken:"access_token"},ge=s=>typeof s=="string"?s:[s.field,s.direction==="desc"?s.direction:void 0].filter(Boolean).join(" "),ye=(s,e)=>{const{predicates:t,...a}=e,r=new URL("documents/search",`${s}/`);if(t)for(const n of L(t))r.searchParams.append("q",`[${n}]`);for(const n in a){const i=fe[n]??n;let o=a[n];if(i==="orderings"){const f=a[i];f!=null&&(o=`[${L(f).map(S=>ge(S)).join(",")}]`)}else i==="routes"&&typeof a[i]=="object"&&(o=JSON.stringify(L(a[i])));o!=null&&r.searchParams.set(i,L(o).join(","))}return r.toString()},C={Any:"Any",Document:"Document",Media:"Media",Web:"Web"},pe=s=>{var e;return{link_type:C.Document,id:s.id,uid:s.uid??void 0,type:s.type,tags:s.tags,lang:s.lang,url:s.url??void 0,slug:(e=s.slugs)==null?void 0:e[0],...s.data&&Object.keys(s.data).length>0?{data:s.data}:{}}},ve=(s,e)=>{if(!s)return null;const t="link_type"in s?s:pe(s);switch(t.link_type){case C.Media:case C.Web:return"url"in t?t.url:null;case C.Document:{if("id"in t&&e){const a=e(t);if(a!=null)return a}return"url"in t&&t.url?t.url:null}case C.Any:default:return null}},h=(s={},e)=>({...s,predicates:[...s.predicates||[],...L(e)]}),Re=s=>typeof s=="function"?s:()=>s,j=(s,e)=>{const t=s.find(a=>e(a));if(!t)throw new _("Ref could not be found.",void 0,void 0);return t},W=s=>j(s,e=>e.isMasterRef),Q=(s,e)=>j(s,t=>t.id===e),G=(s,e)=>j(s,t=>t.label===e),we="io.prismic.preview",Z=s=>s.replace(/%3B/g,";"),me=s=>{const e=s.split("; ");let t;for(const a of e){const r=a.split("=");if(Z(r[0]).replace(/%3D/g,"=")===we){t=Z(r.slice(1).join("="));continue}}return t},be=s=>s.replace(/(\n| )*( |{|})(\n| )*/gm,(e,t,a)=>a);class _e extends _{}class Pe extends _{}class Te extends _{}const ee=s=>Array.isArray(s)?`[${s.map(ee).join(", ")}]`:typeof s=="string"?`"${s}"`:s instanceof Date?`${s.getTime()}`:`${s}`,c=s=>(t,...a)=>{const r=a.map(ee).join(", "),n=t&&a.length?", ":"";return`[${s}(${t}${n}${r})]`},J=s=>{const e=c(s);return a=>e(a)},Se=s=>{const e=c(s);return(...a)=>e("",...a)},R={at:c("at"),not:c("not"),any:c("any"),in:c("in"),fulltext:c("fulltext"),has:J("has"),missing:J("missing"),similar:Se("similar"),geopointNear:c("geopoint.near"),numberLessThan:c("number.lt"),numberGreaterThan:c("number.gt"),numberInRange:c("number.inRange"),dateAfter:c("date.after"),dateBefore:c("date.before"),dateBetween:c("date.between"),dateDayOfMonth:c("date.day-of-month"),dateDayOfMonthAfter:c("date.day-of-month-after"),dateDayOfMonthBefore:c("date.day-of-month-before"),dateDayOfWeek:c("date.day-of-week"),dateDayOfWeekAfter:c("date.day-of-week-after"),dateDayOfWeekBefore:c("date.day-of-week-before"),dateMonth:c("date.month"),dateMonthAfter:c("date.month-after"),dateMonthBefore:c("date.month-before"),dateYear:c("date.year"),dateHour:c("date.hour"),dateHourAfter:c("date.hour-after"),dateHourBefore:c("date.hour-before")};var ke=Object.defineProperty,Ae=(s,e,t)=>e in s?ke(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,m=(s,e,t)=>(Ae(s,typeof e!="symbol"?e+"":e,t),t);const Ie=100,Le=5e3,Ee=500;var b;(function(s){s.Master="Master",s.ReleaseID="ReleaseID",s.ReleaseLabel="ReleaseLabel",s.Manual="Manual"})(b||(b={}));const B=s=>R.at("document.type",s),K=s=>R.at("document.tags",L(s)),$=s=>R.any("document.tags",L(s)),Fe=(s,e)=>new De(s,e);class De{constructor(e,t={}){if(m(this,"endpoint"),m(this,"accessToken"),m(this,"routes"),m(this,"brokenRoute"),m(this,"fetchFn"),m(this,"defaultParams"),m(this,"refState",{mode:b.Master,autoPreviewsEnabled:!0}),m(this,"cachedRepository"),m(this,"cachedRepositoryExpiration",0),m(this,"graphqlFetch",this.graphQLFetch.bind(this)),ue(e)?this.endpoint=e:this.endpoint=he(e),this.accessToken=t.accessToken,this.routes=t.routes,this.brokenRoute=t.brokenRoute,this.defaultParams=t.defaultParams,t.ref&&this.queryContentFromRef(t.ref),typeof t.fetch=="function")this.fetchFn=t.fetch;else if(typeof globalThis.fetch=="function")this.fetchFn=globalThis.fetch;else throw new _("A valid fetch implementation was not provided. In environments where fetch is not available (including Node.js), a fetch implementation must be provided via a polyfill or the `fetch` option.",void 0,void 0);this.fetchFn===globalThis.fetch&&(this.fetchFn=this.fetchFn.bind(globalThis)),this.graphQLFetch=this.graphQLFetch.bind(this)}enableAutoPreviews(){this.refState.autoPreviewsEnabled=!0}enableAutoPreviewsFromReq(e){this.refState.httpRequest=e,this.refState.autoPreviewsEnabled=!0}disableAutoPreviews(){this.refState.autoPreviewsEnabled=!1}async query(e,t){const a=await this.buildQueryURL({...t,predicates:e});return await this.fetch(a,t)}async get(e){const t=await this.buildQueryURL(e);return await this.fetch(t,e)}async getFirst(e){var t;const a={...e};!(e&&e.page)&&!(e!=null&&e.pageSize)&&(a.pageSize=((t=this.defaultParams)==null?void 0:t.pageSize)??1);const r=await this.buildQueryURL(a),i=(await this.fetch(r,e)).results[0];if(i)return i;throw new _("No documents were returned",r,void 0)}async dangerouslyGetAll(e={}){var t;const{limit:a=1/0,...r}=e,n={...r,pageSize:Math.min(a,r.pageSize||((t=this.defaultParams)==null?void 0:t.pageSize)||Ie)},i=[];let o;for(;(!o||o.next_page)&&i.length<a;){const f=o?o.page+1:void 0;o=await this.get({...n,page:f}),i.push(...o.results),o.next_page&&await new Promise(w=>setTimeout(w,Ee))}return i.slice(0,a)}async getByID(e,t){return await this.getFirst(h(t,R.at("document.id",e)))}async getByIDs(e,t){return await this.get(h(t,R.in("document.id",e)))}async getAllByIDs(e,t){return await this.dangerouslyGetAll(h(t,R.in("document.id",e)))}async getByUID(e,t,a){return await this.getFirst(h(a,[B(e),R.at(`my.${e}.uid`,t)]))}async getByUIDs(e,t,a){return await this.get(h(a,[B(e),R.in(`my.${e}.uid`,t)]))}async getAllByUIDs(e,t,a){return await this.dangerouslyGetAll(h(a,[B(e),R.in(`my.${e}.uid`,t)]))}async getSingle(e,t){return await this.getFirst(h(t,B(e)))}async getByType(e,t){return await this.get(h(t,B(e)))}async getAllByType(e,t){return await this.dangerouslyGetAll(h(t,B(e)))}async getByTag(e,t){return await this.get(h(t,$(e)))}async getAllByTag(e,t){return await this.dangerouslyGetAll(h(t,$(e)))}async getByEveryTag(e,t){return await this.get(h(t,K(e)))}async getAllByEveryTag(e,t){return await this.dangerouslyGetAll(h(t,K(e)))}async getBySomeTags(e,t){return await this.get(h(t,$(e)))}async getAllBySomeTags(e,t){return await this.dangerouslyGetAll(h(t,$(e)))}async getRepository(e){const t=new URL(this.endpoint);return this.accessToken&&t.searchParams.set("access_token",this.accessToken),await this.fetch(t.toString(),e)}async getRefs(e){return(await this.getRepository(e)).refs}async getRefByID(e,t){const a=await this.getRefs(t);return Q(a,e)}async getRefByLabel(e,t){const a=await this.getRefs(t);return G(a,e)}async getMasterRef(e){const t=await this.getRefs(e);return W(t)}async getReleases(e){return(await this.getRefs(e)).filter(a=>!a.isMasterRef)}async getReleaseByID(e,t){const a=await this.getReleases(t);return Q(a,e)}async getReleaseByLabel(e,t){const a=await this.getReleases(t);return G(a,e)}async getTags(e){try{const t=await this.getCachedRepositoryForm("tags",e),a=new URL(t.action);return this.accessToken&&a.searchParams.set("access_token",this.accessToken),await this.fetch(a.toString(),e)}catch{return(await this.getRepository(e)).tags}}async buildQueryURL({signal:e,...t}={}){const a=t.ref||await this.getResolvedRefString(),r=t.integrationFieldsRef||(await this.getCachedRepository({signal:e})).integrationFieldsRef||void 0;return ye(this.endpoint,{...this.defaultParams,...t,ref:a,integrationFieldsRef:r,routes:t.routes||this.routes,brokenRoute:t.brokenRoute||this.brokenRoute,accessToken:t.accessToken||this.accessToken})}async resolvePreviewURL(e){var t,a;let r=e.documentID,n=e.previewToken;if(typeof globalThis.location<"u"){const i=new URLSearchParams(globalThis.location.search);r=r||i.get("documentId"),n=n||i.get("token")}else if(this.refState.httpRequest){if("query"in this.refState.httpRequest)r=r||((t=this.refState.httpRequest.query)==null?void 0:t.documentId),n=n||((a=this.refState.httpRequest.query)==null?void 0:a.token);else if("url"in this.refState.httpRequest&&this.refState.httpRequest.url){const i=new URL(this.refState.httpRequest.url).searchParams;r=r||i.get("documentId"),n=n||i.get("token")}}if(r!=null&&n!=null){const i=await this.getByID(r,{signal:e.signal,ref:n,lang:"*"}),o=ve(i,e.linkResolver);if(typeof o=="string")return o}return e.defaultURL}queryLatestContent(){this.refState.mode=b.Master}queryContentFromReleaseByID(e){this.refState={...this.refState,mode:b.ReleaseID,releaseID:e}}queryContentFromReleaseByLabel(e){this.refState={...this.refState,mode:b.ReleaseLabel,releaseLabel:e}}queryContentFromRef(e){this.refState={...this.refState,mode:b.Manual,ref:e}}async graphQLFetch(e,t){const a=await this.getCachedRepository(),r=await this.getResolvedRefString(),n={"Prismic-ref":r,Authorization:this.accessToken?`Token ${this.accessToken}`:"",...t?t.headers:{}};a.integrationFieldsRef&&(n["Prismic-integration-field-ref"]=a.integrationFieldsRef);const i={};for(const w in n)n[w]&&(i[w.toLowerCase()]=n[w]);const o=new URL(e);o.searchParams.set("ref",r);const f=o.searchParams.get("query");return f&&o.searchParams.set("query",be(f)),await this.fetchFn(o.toString(),{...t,headers:i})}async getCachedRepository(e){return(!this.cachedRepository||Date.now()>=this.cachedRepositoryExpiration)&&(this.cachedRepositoryExpiration=Date.now()+Le,this.cachedRepository=await this.getRepository(e)),this.cachedRepository}async getCachedRepositoryForm(e,t){const r=(await this.getCachedRepository(t)).forms[e];if(!r)throw new _(`Form with name "${e}" could not be found`,void 0,void 0);return r}async getResolvedRefString(e){var t,a;if(this.refState.autoPreviewsEnabled){let i,o;if((t=this.refState.httpRequest)!=null&&t.headers?"get"in this.refState.httpRequest.headers&&typeof this.refState.httpRequest.headers.get=="function"?o=this.refState.httpRequest.headers.get("cookie"):"cookie"in this.refState.httpRequest.headers&&(o=this.refState.httpRequest.headers.cookie):(a=globalThis.document)!=null&&a.cookie&&(o=globalThis.document.cookie),o&&(i=me(o)),i)return i}const r=await this.getCachedRepository(e),n=this.refState.mode;if(n===b.ReleaseID)return Q(r.refs,this.refState.releaseID).ref;if(n===b.ReleaseLabel)return G(r.refs,this.refState.releaseLabel).ref;if(n===b.Manual){const i=await Re(this.refState.ref)();if(typeof i=="string")return i}return W(r.refs).ref}async fetch(e,t={}){const a=await this.fetchFn(e,{signal:t.signal});let r;try{r=await a.json()}catch{throw a.status===404?new Pe(`Prismic repository not found. Check that "${this.endpoint}" is pointing to the correct repository.`,e,void 0):new _(void 0,e,void 0)}switch(a.status){case 200:return r;case 400:throw new Te(r.message,e,r);case 401:case 403:throw new _e("error"in r?r.error:r.message,e,r)}throw new _(void 0,e,r)}}const X=globalThis.__sveltekit_8uvg6q.env,Be=[{type:"recipepost",path:"/"}],qe=({request:s,fetch:e}={})=>{const t={fetch:e,accessToken:X.PUBLIC_TOKEN,routes:Be,headers:{"Access-Control-Allow-Origin":"*"}},a=Fe(X.PUBLIC_REPOSITORY,t);return s&&a.enableAutoPreviewsFromReq(s),a};class $e{constructor(){this._client=qe()}async getPosts(e=0,t=""){const a=await this._client.get({predicates:[R.at("document.type",Y),R.fulltext(`my.${Y}.post_title`,t)],orderings:{field:"document.first_publication_date",direction:"desc"},pageSize:ie,page:e});return{data:a.results.map(r=>({title:r.data.post_title[0].text,imageUrl:r.data.post_image.url,cookingTime:r.data.cooking_time,uid:r.data.postcontent.uid})),page:a.page,totalResults:a.total_results_size,totalPages:a.total_pages,isEnd:a.next_page==null,isStart:a.prev_page==null}}async getPostContent(e){const t=await this._client.getByUID(ne,e);return{imageUrl:t.data.headline_image.url,title:t.data.title[0].text,cookingTime:t.data.cooking_time,description:t.data.description[0].text,calories:t.data.energy_value[0].calories,proteins:t.data.energy_value[0].proteins,fats:t.data.energy_value[0].fats,carbohydrates:t.data.energy_value[0].carbohydrates,ingredients:[...t.data.ingredients.map(a=>({title:a.name[0].text,value:a.value[0].text}))],instruction:[...t.data.inscruction.map(a=>({imageUrl:a.image.url,description:a.ins_description[0].text}))]}}}export{Ue as L,$e as P};
